## SmartRecommend Index

(_Required only for_ `ML-based`)

### How to Create a SmartRecommend Index

#### Step 1: Access the Index Library

- Navigate to the `Index Library` page using the top navigation menu.

#### Step 2: Add a New Index

- Click on “Add new +” within the project card that you want to add your index to.
- In the pop-up window, enter a title for your index, choose `SmartRecommend` as the type, and click “Create” to proceed.
![Create index](images/index/smart_recommend/create_index.png)

#### Step 3: View Created Index in Index Overview

- The created index will have a status that indicates “Action Required: Add Data Source” on the Index overview page after creation.
![Created index](images/index/smart_recommend/created_index.png)
- **Status Definitions:**
    - `Action required: Add data source`: This status means at least **one data source** needs to be added to start delivering personalised recommendations.
    - `Pending sync`: This status indicates the sync process is queued and waiting to start.
    - `Syncing`: This status indicates syncing is currently in progress. Please wait for it to complete.
    - `Active`: This status indicates that the index is now actively providing personalised recommendations.

#### Step 4: Add a Data Source

- Click “Data Sources” tab and you will be redirected to the data sources page.
![Add data source](images/index/smart_recommend/add_data_source_1.png)
- You can use a maximum of **two data sources**, whether a combination of web and API data sources or just one type.

#### Step 4.1. Setup a Web Data Source

- To add a `Web Data Source`, click **“Add new +”**, select **“Add Web data source”**, and follow the prompts to set up the data source.
![Add web data source](images/index/smart_recommend/add_web_data_source.png)
- Select your website domain to index from the list of websites crawled by SearchSG. If your domain is not listed, click **“Domain is missing”**.
- Selecting a `filter` to control the types of pages displayed in your recommendation banner is **optional**. There are three filter options available: **Category**, **Content Type**, and **Last Updated Date**. You may select a maximum of one filter per data source.
    - Category: Choose from the categories you have tagged on your web pages or those automatically generated by our machine learning model.
    - Content Type: Choose from the content types you have tagged on your web pages or those automatically generated by our machine learning model.
    - Last Updated Date: Only pages created or updated after the specified date will appear in your recommendation banner.
- Click “Next”, then confirm by clicking “Proceed” in the pop-up window.
![Add web data source](images/index/smart_recommend/add_web_data_source_confirmation.png)
- You will be redirected to the previous page, where the newly created data source will appear under the “Web/API data sources” section.
![Added web data source](images/index/smart_recommend/added_web_data_source.png)

#### Step 4.2. Setup an API Data Source

- This API connector allows agencies to index custom API data that may be protected or not publicly available. Our API connector polls your configured endpoints hourly, to process changes in your content and updates your index automatically.
- To add an `API Data Source`, click **“Add new +”**, select **“Add API data source”**, and follow the prompts to set up the data source.
![Add data source](images/index/smart_recommend/add_data_source_2.png)
- Fill up your API information and click “Next”. Refer our docs to understand [how API Data sources work](https://docs.developer.tech.gov.sg/docs/searchsg-onboarding-guide/indexing-features?id=b-api-data-source).
![Add API data source](images/index/smart_recommend/add_api_data_source.png)
- Once configured, a data health check will be performed on your API.
![API data health check](images/index/smart_recommend/api_data_health_check_pass.png)
- If all required data are present, click **“Add data source”**.
- If any required data are missing, you can choose to **“Fix issues”** or **“Continue with warnings”**.
![API data health check](images/index/smart_recommend/api_data_health_check_fail.png)
- Click “Add data source” in the confirmation pop-up.
![Add API data source](images/index/smart_recommend/add_api_data_source_confirmation.png)
- You will be redirected to the previous page, where the newly created data source will appear under the “Web/API data sources” section.
![Added API data source](images/index/smart_recommend/added_api_data_source.png)

#### Step 5: Automatic Sync of Changes

- You can make multiple changes as needed.
- All updates will be applied automatically during the next scheduled sync, which runs **every 15 minutes**.
- If you’re using the web data source, any new pages added to your site will appear in recommendations the next day, once SearchSG has crawled them.
![Index Pending Sync](images/index/smart_recommend/index_pending_sync.png)

### How to Delete the SmartRecommend Index

***Note: Deleting a SmartRecommend index will remove all previously collected content & interactions history associated with it, and recommendations will no longer be available.***

1. Click **“More actions”**, then select **“Delete”**.
![Delete Index](images/index/smart_recommend/delete_index_menu.png)
2. Click “Delete” in the confirmation pop-up.
![Delete Index](images/index/smart_recommend/delete_index.png)
3. You will be redirected to the index library page once the index is successfully removed.
![Deleted Index](images/index/smart_recommend/deleted_index.png)
    - Only indexes not used in any sites can be deleted.